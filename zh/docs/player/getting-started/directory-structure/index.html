<!doctype html><html lang=zh dir=ltr>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="目录结构 # New Project Scaffolding # 若玩家直接使用 git 指令拉取源码仓库，那仅需关注其中的 V2RaycSpider[KernelCode] 文件夹，如下目录结构以此为根展开介绍。 . ├── examples │ ├── __init__.py │ ├── atomic_assault.py │">
<meta name=theme-color content="#FFFFFF">
<meta name=color-scheme content="light dark"><meta property="og:title" content="目录结构">
<meta property="og:description" content>
<meta property="og:type" content="website">
<meta property="og:url" content="https://blog.echosec.top/v2rss-docs/zh/docs/player/getting-started/directory-structure/">
<title>目录结构 | V2RSS</title>
<link rel=manifest href=/v2rss-docs/manifest.json>
<link rel=icon href=/v2rss-docs/favicon.png type=image/x-icon>
<link rel=alternate hreflang=en href=https://blog.echosec.top/v2rss-docs/docs/player/getting-started/directory-structure/ title="Directory Structure">
<link rel=stylesheet href=/v2rss-docs/book.min.31cccedbc2b6812eb37d0d37cdf4cb30cb89bd41421d3d51da624e11baccfe92.css integrity="sha256-MczO28K2gS6zfQ03zfTLMMuJvUFCHT1R2mJOEbrM/pI=" crossorigin=anonymous>
<script defer src=/v2rss-docs/flexsearch.min.js></script>
<script defer src=/v2rss-docs/zh.search.min.3b04b2863630709b404d6fc4613a42887ee3cdb96c689b2fbab153167ae9f04e.js integrity="sha256-OwSyhjYwcJtATW/EYTpCiH7jzblsaJsvurFTFnrp8E4=" crossorigin=anonymous></script>
<script defer src=/v2rss-docs/sw.min.aeca12fe35b505bfeee163dd053d29bc61e27f5f18031d81beb279f79dca12dd.js integrity="sha256-rsoS/jW1Bb/u4WPdBT0pvGHif18YAx2BvrJ5953KEt0=" crossorigin=anonymous></script>
<link rel=alternate type=application/rss+xml href=https://blog.echosec.top/v2rss-docs/zh/docs/player/getting-started/directory-structure/index.xml title=V2RSS>
</head>
<body dir=ltr>
<input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control>
<main class="container flex">
<aside class=book-menu>
<div class=book-menu-content>
<nav>
<h2 class=book-brand>
<a class="flex align-center" href=/v2rss-docs/zh/><span>V2RSS</span>
</a>
</h2>
<div class=book-search>
<input type=text id=book-search-input placeholder=搜索 aria-label=搜索 maxlength=64 data-hotkeys=s/>
<div class="book-search-spinner hidden"></div>
<ul id=book-search-results></ul>
</div>
<ul class=book-languages>
<li>
<input type=checkbox id=languages class=toggle>
<label for=languages class="flex justify-between">
<a role=button class="flex align-center">
<img src=/v2rss-docs/svg/translate.svg class=book-icon alt=Languages>
简体中文
</a>
</label>
<ul>
<li>
<a href=https://blog.echosec.top/v2rss-docs/docs/player/getting-started/directory-structure/>
English
</a>
</li>
</ul>
</li>
</ul>
<ul>
<li class=book-section-flat>
<input type=checkbox id=section-b900152bb5efd8f491d123b5f73aa30d class=toggle>
<label for=section-b900152bb5efd8f491d123b5f73aa30d class="flex justify-between">
<a role=button>使用指南</a>
</label>
<ul>
<li>
<input type=checkbox id=section-2b972d89b8f8f7938533027041bbe17b class=toggle>
<label for=section-2b972d89b8f8f7938533027041bbe17b class="flex justify-between">
<a role=button>云彩姬</a>
</label>
<ul>
<li>
<a href=https://blog.echosec.top/v2rss-docs/zh/docs/user/v2rss-cli/overview/>Overview</a>
<ul>
</ul>
</li>
<li>
<a href=https://blog.echosec.top/v2rss-docs/zh/docs/user/v2rss-cli/install/>下载资源</a>
<ul>
</ul>
</li>
<li>
<a href=https://blog.echosec.top/v2rss-docs/zh/docs/user/v2rss-cli/quick-start/>快速上手</a>
<ul>
</ul>
</li>
<li>
<a href=https://blog.echosec.top/v2rss-docs/zh/docs/user/v2rss-cli/toc/>注意事项</a>
<ul>
</ul>
</li>
</ul>
</li>
<li>
<a href=https://blog.echosec.top/v2rss-docs/zh/docs/user/v2rss-shortcut/>捷径</a>
<ul>
</ul>
</li>
<li>
<input type=checkbox id=section-c08313d7406b63cbb7fcd8168cf44116 class=toggle>
<label for=section-c08313d7406b63cbb7fcd8168cf44116 class="flex justify-between">
<a role=button>聊天机器人</a>
</label>
<ul>
<li>
<a href=https://blog.echosec.top/v2rss-docs/zh/docs/user/bots/overview/>Overview</a>
<ul>
</ul>
</li>
<li>
<span>Telegram Bot</span>
<ul>
</ul>
</li>
<li>
<span>DingTalk Bot</span>
<ul>
</ul>
</li>
<li>
<span>None Bot</span>
<ul>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class=book-section-flat>
<input type=checkbox id=section-27d250f93b10a45d08befdb5dd2f0f3b class=toggle checked>
<label for=section-27d250f93b10a45d08befdb5dd2f0f3b class="flex justify-between">
<a role=button>开发指南</a>
</label>
<ul>
<li>
<input type=checkbox id=section-a467ca43dbcdaf2ffbd8aeecc80a9440 class=toggle checked>
<label for=section-a467ca43dbcdaf2ffbd8aeecc80a9440 class="flex justify-between">
<a role=button>开始使用</a>
</label>
<ul>
<li>
<a href=https://blog.echosec.top/v2rss-docs/zh/docs/player/getting-started/overview/>环境复现</a>
<ul>
</ul>
</li>
<li>
<a href=https://blog.echosec.top/v2rss-docs/zh/docs/player/getting-started/quick-start/>快速上手</a>
<ul>
</ul>
</li>
<li>
<a href=https://blog.echosec.top/v2rss-docs/zh/docs/player/getting-started/install-v2rss/>源码下载</a>
<ul>
</ul>
</li>
<li>
<a href=https://blog.echosec.top/v2rss-docs/zh/docs/player/getting-started/basic-usage/>基本用法</a>
<ul>
</ul>
</li>
<li>
<a href=https://blog.echosec.top/v2rss-docs/zh/docs/player/getting-started/directory-structure/ class=active>目录结构</a>
<ul>
</ul>
</li>
<li>
<a href=https://blog.echosec.top/v2rss-docs/zh/docs/player/getting-started/configuration/>项目配置</a>
<ul>
</ul>
</li>
</ul>
</li>
<li>
<input type=checkbox id=section-02591bebd5ca01427869ded3401321a8 class=toggle>
<label for=section-02591bebd5ca01427869ded3401321a8 class="flex justify-between">
<a role=button>脚手架指令</a>
</label>
<ul>
<li>
<a href=https://blog.echosec.top/v2rss-docs/zh/docs/player/cli/overview/>Overview</a>
<ul>
</ul>
</li>
<li>
<a href=https://blog.echosec.top/v2rss-docs/zh/docs/player/cli/ping/>Scaffold Ping</a>
<ul>
</ul>
</li>
<li>
<a href=https://blog.echosec.top/v2rss-docs/zh/docs/player/cli/build/>Scaffold Build</a>
<ul>
</ul>
</li>
<li>
<a href=https://blog.echosec.top/v2rss-docs/zh/docs/player/cli/pool/>Scaffold Pool</a>
<ul>
</ul>
</li>
<li>
<a href=https://blog.echosec.top/v2rss-docs/zh/docs/player/cli/deploy/>Scaffold Deploy</a>
<ul>
</ul>
</li>
<li>
<a href=https://blog.echosec.top/v2rss-docs/zh/docs/player/cli/synergy/>Scaffold Synergy</a>
<ul>
</ul>
</li>
<li>
<a href=https://blog.echosec.top/v2rss-docs/zh/docs/player/cli/server/>Scaffold Server</a>
<ul>
</ul>
</li>
<li>
<a href=https://blog.echosec.top/v2rss-docs/zh/docs/player/cli/entropy/>Scaffold Entropy</a>
<ul>
</ul>
</li>
<li>
<a href=https://blog.echosec.top/v2rss-docs/zh/docs/player/cli/mining/>Scaffold Mining</a>
<ul>
</ul>
</li>
<li>
<a href=https://blog.echosec.top/v2rss-docs/zh/docs/player/cli/spawn/>Scaffold Spawn</a>
<ul>
</ul>
</li>
<li>
<a href=https://blog.echosec.top/v2rss-docs/zh/docs/player/cli/ash/>Scaffold Ash</a>
<ul>
</ul>
</li>
</ul>
</li>
<li>
<input type=checkbox id=section-723140cbe530ea3669e1696982bbe922 class=toggle>
<label for=section-723140cbe530ea3669e1696982bbe922 class="flex justify-between">
<a role=button>托管 & 部署</a>
</label>
<ul>
<li>
<span>V2rss Deploy</span>
<ul>
</ul>
</li>
<li>
<span>Host on GitHub</span>
<ul>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<a href=https://blog.echosec.top target=_blank rel=noopener>
Blog
</a>
</li>
<li>
<a href=https://github.com/qin2dim/V2rayCloudSpider target=_blank rel=noopener>
GitHub
</a>
</li>
<li>
<a href=https://github.com/QIN2DIM/V2RayCloudSpider/discussions/categories/%E5%90%B9%E6%B0%B4 target=_blank rel=noopener>
Discussions
</a>
</li>
<li>
<a href=https://t.me/joinchat/HlB9SQJubb5VmNU5 target=_blank rel=noopener>
TG Studio
</a>
</li>
</ul>
</nav>
<script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>
</div>
</aside>
<div class=book-page>
<header class=book-header>
<div class="flex align-center justify-between">
<label for=menu-control>
<img src=/v2rss-docs/svg/menu.svg class=book-icon alt=Menu>
</label>
<strong>目录结构</strong>
<label for=toc-control>
</label>
</div>
<link rel=stylesheet href=//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css>
</header>
<article class=markdown><h1 id=目录结构>
目录结构
<a class=anchor href=#%e7%9b%ae%e5%bd%95%e7%bb%93%e6%9e%84>#</a>
</h1>
<h2 id=new-project-scaffolding>
New Project Scaffolding
<a class=anchor href=#new-project-scaffolding>#</a>
</h2>
<p>若玩家直接使用 <code>git</code> 指令拉取源码仓库，那仅需关注其中的 <code>V2RaycSpider[KernelCode]</code> 文件夹，如下目录结构以此为根展开介绍。</p>
<pre tabindex=0><code class=language-asp data-lang=asp>.
├── examples
│   ├── __init__.py
│   ├── atomic_assault.py
│   ├── atomic_check.py
│   ├── atomic_go.py
│   └── server_dev.py
├── src
│   ├── apis
│   ├── database
│   ├── driver
│   ├── services
│   ├── __init__.py
│   ├── config.py
│   ├── config.yaml
│   ├── config-sample.yaml
│   └── main.py
└── requirements.txt
</code></pre><h2 id=directory-structure-explained>
Directory Structure Explained
<a class=anchor href=#directory-structure-explained>#</a>
</h2>
<h3 id=examples>
examples
<a class=anchor href=#examples>#</a>
</h3>
<p>这里存放一些精简化的后端功能接口，玩家可通过这些运行案例迅速了解服务间的层级关系以及核心业务的实现逻辑。其中，<code>server_dev.py</code> 启动的一个 <code>dev</code> 环境的接口服务器；<code>atomic_go.py</code> 启动一个指定的采集实例，可通过修改 <code>alias</code> 指定不同的采集实例；<code>atomic_assault.py</code> 则是实例运行的 <code>gevent</code> 版本，可并发地执行多个采集实例；<code>atomic_check.py</code> 用于检查本地采集队列的健康状态。</p>
<p>值得一提的是，这些功能都可通过脚手架快速调用，放在这主要便于扁平化的案例介绍。</p>
<h3 id=srcapis>
src/apis
<a class=anchor href=#srcapis>#</a>
</h3>
<p>存放全局接口函数，如一些复杂的脚手架接口逻辑会在此编排。</p>
<h3 id=srcdatabase>
src/database
<a class=anchor href=#srcdatabase>#</a>
</h3>
<p>存放系统运行缓存。在项目初始化后，此文件夹被自动创建。</p>
<h3 id=srcdriver>
src/driver
<a class=anchor href=#srcdriver>#</a>
</h3>
<p>存放 <code>chromedriver</code> 驱动程序。在项目初始化后，此文件夹被自动创建。</p>
<h3 id=srcservices>
src/services
<a class=anchor href=#srcservices>#</a>
</h3>
<p>存放核心业务代码，包括如下内容：</p>
<pre tabindex=0><code>.
├── app
│   ├── bot
│   ├── panel
│   ├── server
│   └── __init__.py
├── collector
│   ├── nest
│   ├── __init__.py
│   ├── actions.py
│   ├── core.py
│   ├── exceptions.py
│   └── operator.py
├── decoupler
│   ├── __init__.py
│   └── decoupler.py
├── middleware
│   ├── __init__.py
│   ├── stream_io.py
│   ├── subscribe_io.py
│   └── workers_io.py
├── utils
│   ├── accelerator
│   ├── armor
│   ├── sspanel_mining
│   ├── toolbox
│   └── __init__.py
├── __init__.py
├── deploy.py
├── scaffold.py
└── settings.py
</code></pre><ul>
<li>
<p>app</p>
<p>存放接口服务器模型。可见，目前云彩姬支持以聊天机器人（Nonebot、Telegram-bot、DingTalk-bot&mldr;&mldr;）、PC客户端面板、以及API接口的形式分发订阅。</p>
</li>
<li>
<p>collector</p>
<p>采集器逻辑层代码。<code>core.py</code> 存放核心业务代码，包含采集器整个周期的行为函数；<code>actions.py</code> 维护一个 <code>__entropy__</code> 本地采集队列，存放着采集实例的上下文摘要信息；<code>operator.py</code> 存放着一个接口解释器，输入 <code>atomic_context</code> ，输出一个特征完整的采集实例；<code>exceptions.py</code> 存放采集器运行时常见的报错类型。</p>
</li>
<li>
<p>decoupler</p>
<p>订阅解耦器，核心功能是清楚失效订阅。</p>
</li>
<li>
<p>middleware</p>
<p>数据库交互层。<code>stream_io.py</code> 存放各类型数据库的基准链接方案；<code>subscribe_io.py</code> 存放着继承自 <code>RedisClient</code> 基类的高级逻辑代码，负责管理订阅池；<code>workers_io.py</code> 存放着继承自 <code>RedisClient</code> 基类的高级逻辑代码，包含任务堆管理，消息队列，访问控制等模块。</p>
</li>
<li>
<p>utils</p>
<p>可移植模组。存放着云彩姬生态的可移植模组，包含 <code>accelerator</code> 协程加速组件，云彩姬后端服务是基于协程运转的，此组件基于 Gevent 构建了一个可管理的极其轻量的并发框架；<code>armor</code> 存放着一系列人机对抗组件，通过适配器接口无缝衔接至采集器的生命周期中；<code>sspanel_mining</code> 是项目
<a href=https://github.com/RobAI-Lab>RobAI-Lab</a>/<strong>
<a href=https://github.com/RobAI-Lab/sspanel-mining>sspanel-mining</a></strong> 的兼容版本，可通过脚手架 <code>mining</code> 指令运行；<code>toolbox</code> 存放着若干个工具类函数，包括构建基础环境的 <code>build</code> 脚本，<code>InitLog</code> 自定义日志，<code>SubscribeParser</code> 订阅解析，以及包含着各种常用功能的<code>ToolBox</code>工具箱。</p>
</li>
<li>
<p>deploy.py</p>
<p>系统任务的调度中心。</p>
</li>
<li>
<p>scaffold.py</p>
<p>脚手架源码。</p>
</li>
<li>
<p>settings.py</p>
<p>系统设置。设定全局变量用于精确的绝对路径定位，初始化系统日志，引用 <code>src/config.py</code> 中的配置信息。</p>
</li>
</ul>
<h3 id=srcconfigyaml>
src/config.yaml
<a class=anchor href=#srcconfigyaml>#</a>
</h3>
<p>项目配置文件。在项目初始化后，从 <code>src/config_sample.yaml</code> 拷贝生成。 <code>src/config.py</code> 的功能是读取配置信息并转义成 Python 全局变量。</p>
<p>关于配置文件的具体介绍可见「
<a href=/v2rss-docs/zh/docs/player/getting-started/configuration/>CONFIGURATION</a>」。</p>
<h3 id=srcmainpy>
src/main.py
<a class=anchor href=#srcmainpy>#</a>
</h3>
<p>脚手架入口文件，作为运行根辐射系统指令，在脚手架未编译前，作为系统指令的统一入口。</p>
</article>
<footer class=book-footer>
<div class="flex flex-wrap justify-between">
<div><a class="flex align-center" href=https://github.com/qin2dim/v2rss-docs/commit/1a3de1752435abc41c8d9732f562305441123271 title="最后修改者 QIN2DIM | January 14, 2022" target=_blank rel=noopener>
<img src=/v2rss-docs/svg/calendar.svg class=book-icon alt=Calendar>
<span>January 14, 2022</span>
</a>
</div>
<div>
<a class="flex align-center" href=https://github.com/qin2dim/v2rss-docs/tree/main/content.zh/docs/player/getting-started/directory-structure/_index.md target=_blank rel=noopener>
<img src=/v2rss-docs/svg/edit.svg class=book-icon alt=Edit>
<span>编辑本页</span>
</a>
</div>
</div>
<script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>
</footer>
<div class=book-comments>
</div>
<label for=menu-control class="hidden book-menu-overlay"></label>
</div>
</main>
</body>
</html>